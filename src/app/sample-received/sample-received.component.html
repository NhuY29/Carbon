<div class="statistics-container">

    <div class="statistics-container">
        <div class="stat-box" id="active-contracts">
            <i class="icon calendar"></i>
            <h4>{{ 'statistics.totalRequestsToday' | translate }}</h4>
            <p class="stat-number">{{ projectsSentToday?.length ||0 }}</p>
        </div>
    
        <div class="stat-box" id="expired-contracts">
            <i class="icon expired"></i>
            <h4>{{ 'statistics.pendingRequests' | translate }}</h4>
            <p class="stat-number">{{ pendingProjects?.length ||0 }}</p>
        </div>
    
        <div class="stat-box" id="expiring-contracts">
            <i class="icon clock"></i>
            <h4>{{ 'statistics.resolvedRequests' | translate }}</h4>
            <p class="stat-number">{{ doneProjects?.length ||0 }}</p>
        </div>
    </div>
    

</div>

<nz-tabset>
    <nz-tab nzTitle="{{ 'tabs.todayRequests' | translate }}">
        <nz-table #basicTable4 [nzData]="projectsSentToday" [nzBordered]="true">
            <thead>
                <tr>
                    <th>{{ 'table.project' | translate }}</th>
                    <th>{{ 'table.sendDate' | translate }}</th>
                    <th>{{ 'table.viewProject' | translate }}</th>
                    <th>{{ 'table.requestForm' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of basicTable4.data">
                    <td>{{ item.projectId }}</td> 
                    <td>{{ item.sendDate | date:'short' }}</td> 
                    
                    <td>
                        <button nz-button (click)="navigateToProject(item.projectId)">{{ 'buttons.view' | translate }}</button>
                    </td>
                    <td>
                        <button nz-button (click)="downloadPdf(item.projectId,item.id)">{{ 'buttons.downloadRequest' | translate }}<</button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </nz-tab>
    <nz-tab [nzTitle]="pendingTabTemplate">
        <ng-template #pendingTabTemplate>
            {{ 'tabs.pendingRequests' | translate }}
            <nz-badge [nzCount]="pendingProjects?.length || 0"></nz-badge>
        </ng-template>
        <nz-table #basicTable2 [nzData]="pendingProjects" [nzBordered]="true">
            <thead>
                <tr>
                    <th>{{ 'table.project' | translate }}</th>
                    <th>{{ 'table.sendDate' | translate }}</th>
                    <th>{{ 'table.id' | translate }}</th>
                    <th>{{ 'table.viewProject' | translate }}</th>
                    <th>{{ 'table.requestForm' | translate }}</th>
                    <th>{{ 'table.measurementData' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of basicTable2.data">
                    <td>{{ item.projectId }}</td> 
                    <td>{{ item.sendDate | date:'short' }}</td>
                    <td>{{ item.id }}</td> 
                    
                    <td>
                        <button nz-button (click)="navigateToProject(item.projectId)">{{ 'buttons.view' | translate }}</button>
                    </td>
                    <td>
                        <button nz-button (click)="downloadPdf(item.projectId,item.id)">{{ 'buttons.downloadRequest' | translate }}</button>
                    </td>
                    <td>
                        <button nz-button (click)="handleProjectId(item.projectId,item.id)">{{ 'buttons.measurementData' | translate }}</button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </nz-tab>
    <nz-tab nzTitle="{{ 'tabs.resolvedRequests' | translate }}" >
        <nz-table #basicTable3 [nzData]="doneProjects" [nzBordered]="true">
            <thead>
                <tr>
                    <th>{{ 'table.project' | translate }}</th>
                    <th>{{ 'table.sendDate' | translate }}</th>
                    <th>{{ 'table.viewProject' | translate }}</th>
                    <th>{{ 'table.requestForm' | translate }}</th>
                    <th>{{ 'table.confirmationForm' | translate }}</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of basicTable3.data">
                    <td>{{ item.projectId }}</td> 
                    <td>{{ item.sendDate | date:'short' }}</td> 
                    
                    <td>
                        <button nz-button (click)="navigateToProject(item.projectId)">{{ 'buttons.view' | translate }}</button>
                    </td>
                    <td>
                        <button nz-button (click)="downloadPdf(item.projectId,item.id)">{{'buttons.downloadRequest' | translate }}</button>
                    </td>
                    <td>
                        <button nz-button (click)="downPdfReceived(item.projectId,item.id)">{{ 'buttons.downloadConfirmation' | translate }}</button>
                    </td>
                </tr>
            </tbody>
        </nz-table>
    </nz-tab>
</nz-tabset>